---
title: 阻塞非阻塞与同步异步
url: 216.html
id: 216
categories:
  - 计算机网络
date: 2018-12-30 18:36:29
tags:
---

同步异步
====

同步和异步关注的是**消息通信机制** (synchronous communication/ asynchronous communication) 所谓同步，就是在发出一个_调用_时，在没有得到结果之前，该_调用_就不返回。但是一旦调用返回，就得到返回值了。换句话说，就是由_调用者_主动等待这个_调用_的结果。 而异步则是相反，_调用_在发出之后，这个调用就直接返回了，所以没有返回结果。换句话说，当一个异步过程调用发出后，调用者不会立刻得到结果。而是在_调用_发出后，_被调用者_通过状态、通知来通知调用者，或通过回调函数处理这个调用。 举个通俗的例子：你打电话问书店老板有没有《分布式系统》这本书，如果是同步通信机制，书店老板会说，你稍等，”我查一下"，然后开始查啊查，等查好了（可能是5秒，也可能是一天）告诉你结果（返回结果）。而异步通信机制，书店老板直接告诉你我查一下啊，查好了打电话给你，然后直接挂电话了（不返回结果）。然后查好了，他会主动打电话给你。在这里老板通过“回电”这种方式来回调。

阻塞与非阻塞
======

阻塞和非阻塞关注的是程序在等待**调用结果（消息，返回值）时的状态**. 阻塞当结果没返回来的时候将线程挂起 非阻塞，就算io没有返回结果，线程依旧在跑，只是偶尔要检查下有没有返回结果 还是上面的例子，你打电话问书店老板有没有《分布式系统》这本书，你如果是阻塞式调用，你会一直把自己“挂起”，直到得到这本书有没有的结果，如果是非阻塞式调用，你不管老板有没有告诉你，你自己先一边去玩了， 当然你也要偶尔过几分钟check一下老板有没有返回结果。在这里阻塞与非阻塞与是否同步异步无关。跟老板通过什么方式回答你结果无关。

常见误区
====

我常用JAVA的多线程去调用IO，这个操作虽然达到了“**异步**”的效果，实际上的是典型的**同步阻塞操作**，完全不是异步的操作。 在子线程里，我的调用需要等待返回结果，所以这是同步。在等待的过程中，我将线程休息，这是挂起（阻塞）