---
title: 深度理解分析快慢指针
url: 139.html
id: 139
categories:
  - 基本概念
  - 数据结构
date: 2018-11-18 01:50:18
tags:
---

序言
==

在刷LeetCode题目中，只要用到的双指针，都会发现网上很多解析都默认**快指针的速度是慢指针的两倍**，有的过分的甚至会说因为速度两倍，直接把这个**二倍**当做条件使用。如下图 [![快慢指针](https://i.loli.net/2018/11/18/5bf12a4bee04b.png "快慢指针")](https://i.loli.net/2018/11/18/5bf12a4bee04b.png "快慢指针")

### 在LeetCode中对此的解释是

> 如果有环，快指针最终将与慢指针相遇。

    一个安全的选择是每次移动慢指针一步，而移动快指针两步。每一次迭代，快速指针将额外移动一步。如果环的长度为 M，经过 M 次迭代后，快指针肯定会多绕环一周，并赶上慢指针。
    

也就是说一个安全的选择就是二倍，那么什么是**安全**，有为什么是**二倍，不是三倍四倍**，此处也没给出解释。对此，我深感异或。在思考了一整天终于想明白了。由此写出了这篇文章。

安全选择概念
======

这里的安全的定义就是：**如果慢指针在前面，快指针在后面，那么快指针一定会在某一刻与慢指针的position位置重合**，不会因为快指针一次移动位置过长，而错过与慢指针的重合 ps：所谓的重合，是指一次迭代后，最后停下来的位置，而不是中间过程中，有过重合

### 安全原因

因为快指针移动的步数是2，慢指针的步数是1。所以他们之间的**距离每次迭代会减1**。也就是说，无论如何，只要慢指针在快指针前面，某一时刻快指针一定能和慢指针**重叠**。

1.  快指针与慢指针之间差一步。此时继续往后走，慢指针前进一步，快指针前进两步，两者相遇。
    
2.  快指针与慢指针之间差两步。此时继续往后走，慢指针前进一步，快指针前进两步，两者之间相差一步，转化为第一种情况
    

### 三倍---N倍可能性分析

同理如果快指针的步数是3，那么每次迭代也就是**距离每次迭代会减2**，如果有这么一种情况，**慢指针在快指针前面一个位置**。

1.  快指针与慢指针之间差一步。此时继续往后走，慢指针前进一步，快指针前进三步，快指针在慢指针前面。

这样他们永不相遇（不考虑环，就算又环，又要绕多少圈才能相遇呢？其实要多绕一圈，自己想想撸）,也就是不安全的。 N倍也一样,不能保证一定相遇

相遇位置
====

在两倍速度的情况下，如果快慢指针同时从**原点**出发，下次相遇一定是**原点**！

### 原因

![无标题.png](https://upload-images.jianshu.io/upload_images/11238837-4b618784046bbc65.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

1.  相遇位置为B，B离出发位置A的距离为X
2.  总长N
3.  快指针比慢指针快一圈

    解方程
      2X=N+X
       X=N
    相遇位置X正好是N，一圈。所以在原点相遇